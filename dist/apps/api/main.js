(()=>{"use strict";var e={895:(e,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.pluginConfig=void 0;const r=o(928),i=o(276),s=o(662),t=o(525),a=o(512),l=o(292),p=o(966),g=o(587),{sentry:u}=t.environment;let c,d;console.log(i.magenta("API Version %s"),p.version),console.log("Plugin Config -> __dirname: "+__dirname),console.log("Plugin Config -> process.cwd: "+process.cwd()),__dirname.startsWith("/srv/gauzy")?(c="/srv/gauzy/apps/api/src/assets",d="/srv/gauzy/apps/api/public"):(c=r.join(r.resolve(__dirname,"../../../","apps","api","src","assets")),d=r.join(r.resolve(__dirname,"../../../","apps","api","public"))),console.log("Plugin Config -> assetPath: "+c),console.log("Plugin Config -> assetPublicPath: "+d),console.log("DB Synchronize: "+process.env.DB_SYNCHRONIZE),n.pluginConfig={apiConfigOptions:{host:process.env.API_HOST||s.DEFAULT_API_HOST,port:process.env.API_PORT||s.DEFAULT_API_PORT,baseUrl:process.env.API_BASE_URL||s.DEFAULT_API_BASE_URL,middleware:[],graphqlConfigOptions:{path:s.DEFAULT_GRAPHQL_API_PATH,playground:!0,debug:!0,apolloServerPlugins:[]}},dbConnectionOptions:{retryAttempts:100,retryDelay:3e3,migrationsTransactionMode:"each",migrationsRun:"true"!==process.env.DB_SYNCHRONIZE,...t.dbTypeOrmConnectionConfig},dbMikroOrmConnectionOptions:{...t.dbMikroOrmConnectionConfig},dbKnexConnectionOptions:{retryAttempts:100,retryDelay:3e3,...t.dbKnexConnectionConfig},assetOptions:{assetPath:c,assetPublicPath:d},...u?.dsn?{logger:new a.SentryService(l.SentryTracing.options)}:{},plugins:g.plugins}},587:(e,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.plugins=void 0;const r=o(525),i=o(877),s=o(93),t=o(243),a=o(65),l=o(133),p=o(292),{jitsu:g,sentry:u}=r.environment;n.plugins=[...u&&u.dsn?[p.SentryTracing]:[],s.JitsuAnalyticsPlugin.init({config:{host:g.serverHost,writeKey:g.serverWriteKey,debug:g.debug,echoEvents:g.echoEvents}}),i.ChangelogPlugin,t.KnowledgeBasePlugin,a.JobProposalPlugin,l.JobSearchPlugin]},292:(e,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SentryTracing=n.initializeSentry=void 0;const r=o(525),i=o(512),s=o(966);function t(){return r.environment.sentry.dsn?(console.log("Initializing Sentry with DSN:",r.environment.sentry.dsn),i.SentryPlugin.init({dsn:r.environment.sentry.dsn,debug:"true"===process.env.SENTRY_DEBUG||!r.environment.production,environment:r.environment.production?"production":"development",release:"gauzy@"+s.version,logLevels:["error"],integrations:[...i.DefaultSentryIntegrations],tracesSampleRate:process.env.SENTRY_TRACES_SAMPLE_RATE?parseInt(process.env.SENTRY_TRACES_SAMPLE_RATE):.01,profilesSampleRate:process.env.SENTRY_PROFILE_SAMPLE_RATE?parseInt(process.env.SENTRY_PROFILE_SAMPLE_RATE):1,close:{enabled:!0,timeout:3e3}})):(console.log("Sentry not initialized: DSN not provided"),null)}n.initializeSentry=t,n.SentryTracing=t()},966:(e,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.version=void 0,n.version=o(330).version},877:e=>{e.exports=require("@gauzy/changelog-plugin")},662:e=>{e.exports=require("@gauzy/common")},525:e=>{e.exports=require("@gauzy/config")},548:e=>{e.exports=require("@gauzy/core")},93:e=>{e.exports=require("@gauzy/jitsu-analytics-plugin")},65:e=>{e.exports=require("@gauzy/job-proposal-plugin")},133:e=>{e.exports=require("@gauzy/job-search-plugin")},243:e=>{e.exports=require("@gauzy/knowledge-base-plugin")},512:e=>{e.exports=require("@gauzy/sentry-plugin")},276:e=>{e.exports=require("chalk")},928:e=>{e.exports=require("path")},330:e=>{e.exports={version:"0.1.0"}}},n={};function o(r){var i=n[r];if(void 0!==i)return i.exports;var s=n[r]={exports:{}};return e[r](s,s.exports,o),s.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),console.log("API Starting...");const n=o(548);console.log("Bootstrap loaded");const i=o(895);console.log("Plugin Config loaded"),(0,n.bootstrap)(i.pluginConfig).then((()=>{console.log("API is running")})).catch((async e=>{console.log(e),process.exit(1)}))})();var i=exports;for(var s in r)i[s]=r[s];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=main.js.map