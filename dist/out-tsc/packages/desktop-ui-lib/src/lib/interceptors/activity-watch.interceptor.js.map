{"version":3,"file":"activity-watch.interceptor.js","sourceRoot":"","sources":["../../../../../../../packages/desktop-ui-lib/src/lib/interceptors/activity-watch.interceptor.ts"],"names":[],"mappings":";;;;AAAA,wCAAmD;AAGnD,4CAAoE;AAG7D,IAAM,wBAAwB,sCAA9B,MAAM,wBAAwB;IACpC,YAEkB,WAAgB;QAAhB,gBAAW,GAAX,WAAW,CAAK;IAC/B,CAAC;IAEJ,SAAS,CAAC,OAAyB,EAAE,IAAiB;QACrD,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,MAAM,IAAI,uBAAuB,CAAC;QACpE,MAAM,WAAW,GAAG,QAAQ,CAAC;QAC7B,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,qCAAyB,EAAE,CAAC,EAAE;YAC3D,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC5D,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;SACjC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;CACD,CAAA;mCAfY,wBAAwB;IADpC,IAAA,iBAAU,GAAE;IAGV,mBAAA,IAAA,aAAM,EAAC,qBAAS,CAAC,CAAA;;GAFP,wBAAwB,CAepC","sourcesContent":["import { Inject, Injectable } from '@angular/core';\r\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { API_ACTIVITY_WATCH_PREFIX, GAUZY_ENV } from '../constants';\r\n\r\n@Injectable()\r\nexport class ActivityWatchInterceptor implements HttpInterceptor {\r\n\tconstructor(\r\n\t\t@Inject(GAUZY_ENV)\r\n\t\tprivate readonly environment: any\r\n\t) {}\r\n\r\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n\t\tconst baseUrl = this.environment?.AWHost || 'http://localhost:5600';\r\n\t\tconst API_VERSION = '/api/0';\r\n\t\tif (request.url.startsWith(`${API_ACTIVITY_WATCH_PREFIX}`)) {\r\n\t\t\tconst url = baseUrl.concat(API_VERSION).concat(request.url);\r\n\t\t\trequest = request.clone({ url });\r\n\t\t}\r\n\t\treturn next.handle(request);\r\n\t}\r\n}\r\n"]}