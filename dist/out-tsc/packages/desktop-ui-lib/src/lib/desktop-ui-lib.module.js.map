{"version":3,"file":"desktop-ui-lib.module.js","sourceRoot":"","sources":["../../../../../../packages/desktop-ui-lib/src/lib/desktop-ui-lib.module.ts"],"names":[],"mappings":";;;;AAAA,wCAAmD;AACnD,4CAA+C;AAC/C,0BAA+D;AAMxD,IAAM,kBAAkB,gCAAxB,MAAM,kBAAkB;CAAG,CAAA;6BAArB,kBAAkB;IAH9B,IAAA,eAAQ,EAAC;QACT,OAAO,EAAE,CAAC,qBAAY,CAAC;KACvB,CAAC;GACW,kBAAkB,CAAG;AAElC,SAAgB,uBAAuB,CACtC,QAAiC,EACjC,KAAY,EACZ,MAAc,EACd,QAAkB;IAElB,OAAO,GAAG,EAAE;QACX,MAAM,WAAW,GAAQ,QAAQ,CAAC,GAAG,CAAC,aAAS,CAAC,CAAC;QAEjD,MAAM,GAAG,GAAG,WAAW,CAAC,YAAY,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,gEAAgE,EAAE,GAAG,CAAC,CAAC;QAEnF,OAAO,QAAQ;aACb,qBAAqB,CAAC,GAAG,CAAC;aAC1B,OAAO,CAAC,GAAG,EAAE;YACb,OAAO,CAAC,GAAG,CACV,gEAAgE,GAAG,OAAO,KAAK,CAAC,gBAAgB,EAAE,CAClG,CAAC;YACF,wCAAwC;YACxC,qCAAqC;YACrC,IAAI;QACL,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACd,OAAO,CAAC,KAAK,CAAC,wEAAwE,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC;QACnG,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;AACH,CAAC;AA1BD,0DA0BC","sourcesContent":["import { Injector, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { GAUZY_ENV, ServerConnectionService, Store } from '..';\r\nimport { Router } from '@angular/router';\r\n\r\n@NgModule({\r\n\timports: [CommonModule]\r\n})\r\nexport class DesktopUiLibModule {}\r\n\r\nexport function serverConnectionFactory(\r\n\tprovider: ServerConnectionService,\r\n\tstore: Store,\r\n\trouter: Router,\r\n\tinjector: Injector\r\n) {\r\n\treturn () => {\r\n\t\tconst environment: any = injector.get(GAUZY_ENV);\r\n\r\n\t\tconst url = environment.API_BASE_URL;\r\n\t\tconsole.log('Checking server connection in serverConnectionFactory on URL: ', url);\r\n\r\n\t\treturn provider\r\n\t\t\t.checkServerConnection(url)\r\n\t\t\t.finally(() => {\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t`Server connection status in serverConnectionFactory for URL: ${url} is ${store.serverConnection}`\r\n\t\t\t\t);\r\n\t\t\t\t// if (store.serverConnection !== 200) {\r\n\t\t\t\t// \trouter.navigate(['server-down']);\r\n\t\t\t\t// }\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.error(`Error checking server connection in serverConnectionFactory for URL: ${url}`, err);\r\n\t\t\t});\r\n\t};\r\n}\r\n"]}